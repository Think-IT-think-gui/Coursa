<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | User Profile</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{% get_static_prefix %}Temp9/plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="{% get_static_prefix %}Temp9/dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">
  <!-- Navbar -->
   
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
 

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapr">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Course Info</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">User Profile</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-3">

            <!-- Profile Image -->
            <div class="card card-primary card-outline">
              <div class="card-body box-profile">
                <div class="text-center"  id="fat" class="result">
                  <img class="profile-user-img img-fluid img-circle" style="width:90px;height: 90px;"
                  src="{% get_media_prefix %}Courses/{{Data1.id}}.jpg?{{Rand}}"
                       alt="User profile picture">
                </div>
                
                <style>
                  .upload-btn-wrapper {
                  position: relative;
                  overflow: hidden;
                  display: inline-block;
                  cursor: pointer;
                  }	  
                  .upload-btn-wrapper input[type=file] {
                  font-size: 100px;
                  position: absolute;
                  left: 0;
                  top: 0;
                  cursor: pointer;
                  width: 50%;
                  opacity: 0;
                  }
                  </style>
                  <form action="{% url 'course_cover' %}" method="post" enctype="multipart/form-data">
                  {% csrf_token %} 
                  <input value="{{Data1.id}}" name="id" type="hidden" />

                <div style="text-align: center;" class="box">
                  <div style="padding-top: 20px;"></div>
                  <div class="upload-btn-wrapper">
                <button  class="btn btn-light btn-block">change image</button>
               
                <input  class="mdc-text-field__input"  id="file-input" style="width: 100%;" type="file" name="New_Img" accept="image/*" />

                </div>
                
                 
                <button style="width: 100%;" type="submit" class="btn btn-danger">Apply Image</button>

              </form>


                <script>
      
                  // vars
                  let result = document.getElementById("fat"),
                  upload = document.getElementById("file-input"),
                  
                  cropper = '';
                  
                  // on change show image with crop options
                  upload.addEventListener('change', (e) => {
                    if (e.target.files.length) {
                      
                      const reader = new FileReader();
                      reader.onload = (e)=> {
                        if(e.target.result){
                        console.log(e);
                          
                          let img = document.createElement('img');
                          img.id = 'image';
                          img.src = e.target.result;
                          img.setAttribute("class","profile-user-img img-fluid img-circle")
                          img.style = "width:90px;height: 90px;"
                          
                          result.innerHTML = '';
                        
                          result.appendChild(img);
                          // show save btn and options
                          save.classList.remove('hide');
                          options.classList.remove('hide');
                          // init cropper
                          cropper = new Cropper(img);
                        }
                      };
                      reader.readAsDataURL(e.target.files[0]);
                    }
                  });
                  </script>
</div>
                <h3 class="profile-username text-center">{{Data1.Full_Name}}</h3>

                
                

               
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->

            <!-- About Me Box -->
            
            <!-- /.card -->
          </div>
          <!-- /.col -->
          <div class="col-md-9">
            <div class="card">
              <div class="card-header p-2">
                <ul class="nav nav-pills">
                  
                  <li class="nav-item"><a class="nav-link" href="#settings" data-toggle="tab">Settings</a></li>
                </ul>
              </div><!-- /.card-header -->
              <div class="card-body">
                <div class="tab-content">
                 
                
                     <!-- /.tab-pane -->
                  
                  <!-- /.tab-pane -->

                  <div class="tab-pane active tab-pane" id="settings">
                    
                      <div class="form-group row">
                        <label for="inputName" class="col-sm-2 col-form-label">Course Name</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" value="{{Data1.Name}}" id="Name" placeholder="Name">
                        </div>
                      </div>
                      <div class="form-group row">
                        <label for="inputEmail" class="col-sm-2 col-form-label">Course Type</label>
                        <div class="col-sm-10">
                          <select class="form-control" value="{{Data1.Type}}" id="Type"  placeholder="Type">
                            <option selected>{{Data1.Type}}</option>
                            <option>Clothen And Fashion</option>
                            <option>Food And Catering</option>
                            <option>Finance And Savings</option>
                            <option>Repair And Fixes</option>
                            <option>IT and Technology</option>

                            </select>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label for="inputName2" class="col-sm-2 col-form-label">Course Level</label>
                        <div class="col-sm-10">
                          <select class="form-control" value="{{Data1.Level}}" id="Level" placeholder="Level">
                            <option selected>{{Data1.Level}}</option>
                                                
                            <option>Basic</option>
                            <option>Standard</option>
                            <option>Advanced</option>
                          </select>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label for="inputName2" class="col-sm-2 col-form-label">Course Amount $</label>
                        <div class="col-sm-10">
                          <input type="number" class="form-control" id="Amount" value="{{Data1.Amount}}" placeholder="Amount">
                        </div>
                      </div>
                      
                      
                      <div style="padding-top: 20px;"></div>
                      <div class="form-group row">
                        <label for="inputName2" class="col-sm-2 col-form-label">Course Description</label>
                        <div class="col-sm-10">
                          <textarea type="text" class="form-control border-success" id="desc" value="{{Data1.User}}"  placeholder="User ID"></textarea>
                        </div>
                        <script>
                          document.getElementById("desc").innerHTML='{{Data1.Description}}'
                        </script>
                      </div>
                      
                      <div class="form-group row">
                        <div class="offset-sm-2 col-sm-10">
                          <button type="button" onclick="Update_info()" class="btn btn-danger">Submit</button>
                        </div>
                      </div>
                   
                  </div>
                  <!-- /.tab-pane -->
                </div>
                <!-- /.tab-content -->
              </div><!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
   

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->
<script src="{% get_static_prefix %}Temp9/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="{% get_static_prefix %}Temp9/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="{% get_static_prefix %}Temp9/dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="{% get_static_prefix %}Temp9/dist/js/demo.js"></script>
</body>
</html>

<script>
  function getCookie(name) {
  let cookieValue = null;
  if (document.cookie && document.cookie !== '') {
      const cookies = document.cookie.split(';');
      for (let i = 0; i < cookies.length; i++) {
          const cookie = cookies[i].trim();
          // Does this cookie string begin with the name we want?
          if (cookie.substring(0, name.length + 1) === (name + '=')) {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
          }
      }
  }
  return cookieValue;
  }

  const csrftoken = getCookie('csrftoken');
  console.log(csrftoken)

function Update(){
  var plans = document.getElementById('plan').value
  var days = document.getElementById('day').value

data = JSON.stringify({
  Plans: plans,
  Days: days,
  id:'{{Data1.id}}',
 })
  fetch("../../../User_Account/1", {
  method: 'POST',
  body: data,
  headers: { 'X-CSRFToken': csrftoken,'Accept': 'application/json, text/plain, */*',
      'Content-Type': 'application/json',
      },
 })
.then(response => response.json())
.then(data => {
  console.log(data);
  alert(data)

 });}

 function Update_info(){
  var d1 = document.getElementById('Name').value
  var d2 = document.getElementById('Type').value
  var d3 = document.getElementById('Level').value
  var d4 = document.getElementById('Amount').value

  var d9 = document.getElementById('desc').value



data = JSON.stringify({
  Name: d1,
  Type: d2,
  Level: d3,
  Amount: d4,
  Description: d9,


  id:'{{Data1.id}}',
 })
  fetch("{% url 'course_info' %}", {
  method: 'POST',
  body: data,
  headers: { 'X-CSRFToken': csrftoken,'Accept': 'application/json, text/plain, */*',
      'Content-Type': 'application/json',
      },
 })
.then(response => response.json())
.then(data => {
  console.log(data);
  alert(data)

 });}


</script>